<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="nvd3-import.html">

<script>
  var NVD3 = NVD3 || {};

  /**
  NVD3.ChartBehavior provides properties to create nvd3-elements charts.

  @demo demo/index.html
  @group NVD3 Elements
  @element nvd3-behavior
  */

  /**
   * A behavior for nvd3-elements to draw charts.
   */

  NVD3.ChartBehavior = {
    properties: {
      /**
       * NVD3 chart object.
       */
      chart: {
        type: Object
      },

      /*
       * Data
       */
      data: {
        type: Array
      },

      /*
       * SVG object for d3
       */
      svg: {
        type: Object
      },

      /**
       * Stop auto drawing the chart on attaching the element.
       */
      stopAutoDrawing: {
        type: Boolean,
        value: false
      },

      /**
       * Show labels.
       */
      showLabels: {
        type: Boolean,
        value: false
      }
    },

    /**
     * Set nvd3 chart configs based on Element properties.
     */
    _setConfigs: function() {
      this.chart.showLabels(this.showLabels);
    },

    /**
     * Generate and attach the chart;
     */
    generateChart: function() {
      this._setConfigs();

      var chart = this.chart;
      var data = this.data;
      var svg = this.svg;

      nv.addGraph(function() {
        d3.select(svg)
          .datum(data)
          .call(chart);

        return chart;
      });
    }
  };
</script>
